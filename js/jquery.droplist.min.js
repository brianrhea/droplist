(function(e){e.fn.droplist=function(t){var n=e.extend({overflow:"left",ellipsis:"&#8230;",dropicon:"caret"},t);if(n.dropicon!=="caret"){n.dropicon="fa "+n.dropicon}this.each(function(){var t=false;var r=e(this).width()-26;var i=e.makeArray(e(this).find("li"));var s=[];var o=0;var u=[];_.each(i,function(t){o+=e(t).outerWidth();s.push([t,e(t).outerWidth()])});console.log(this);console.log(n);if(n.overflow==="left"){e(this).addClass("droplist-left");if(o>r){o=0;for(var a=s.length-1;a>=0;a--){o+=s[a][1];if(o>r){u.push(s[a][0]);e(s[a][0]).remove();var f=a+1;e(s[f][0]).addClass("no-before");t=true}}}if(t===true){var l=[];if(n.ellipsis){e(this).prepend('<li class="droplist-ellipsis">'+n.ellipsis+"</li>")}e(this).prepend('<li class="droplist-dropdown"><a href="javascript:void(0);" class="droplist-toggle" data-toggle="droplist"><i class="'+n.dropicon+'"></i></a><ul class="droplist-menu"></ul></li>');_.each(u,function(e){l.push(e.outerHTML)});e(this).find(".droplist-menu").append(l.join(""))}}else{e(this).addClass("droplist-right");if(o>r){o=0;for(var a=0;a<s.length;a++){o+=s[a][1];if(o>r){u.push(s[a][0]);e(s[a][0]).remove();var f=a-1;e(s[f][0]).addClass("no-after");t=true}}}if(t===true){var l=[];if(n.ellipsis){e(this).append('<li class="droplist-ellipsis">'+n.ellipsis+"</li>")}e(this).append('<li class="droplist-dropdown"><a href="javascript:void(0);" class="droplist-toggle" data-toggle="droplist"><i class="'+n.dropicon+'"></i></a><ul class="droplist-menu"></ul></li>');_.each(u,function(e){l.push(e.outerHTML)});e(this).find(".droplist-menu").append(l.join(""))}}})}})(jQuery);$(".droplist").on("click",".droplist-dropdown",function(e){if($(this).hasClass("open")){$(this).find(".droplist-menu").fadeOut();$(this).removeClass("open")}else{$(this).find(".droplist-menu").fadeIn();$(this).addClass("open");e.stopPropagation()}});$(document).click(function(){$(this).find(".droplist-menu").fadeOut()})